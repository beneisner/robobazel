load("@rules_foreign_cc//tools/build_defs:cmake.bzl", "cmake_external")
licenses(["notice"])

filegroup(name = "all", srcs = glob(["**"]), visibility = ["//visibility:public"])

cmake_external(
    name = "libtiff",
    lib_source = ":all",
    visibility = ["//visibility:public"],
    cache_entries = {
        "CMAKE_BUILD_TYPE": "Release",
        "ZLIB_ROOT": "$EXT_BUILD_DEPS/libz",
        "PNG_LIBRARIES": "$EXT_BUILD_DEPS/libpng/lib/libpng16.a",
        "PNG_INCLUDE_DIRS": "$EXT_BUILD_DEPS/libpng/include",
    	"BUILD_SHARED_LIBS": "OFF",
    },
    deps = [
        "@zlib//:zlib",
        "@libpng//:libpng",
    ],
)